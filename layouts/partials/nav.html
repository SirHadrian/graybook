<!-- <div class="sidebar"> -->
<!--     {{ range (readDir "content/") }} -->
<!--     {{ if .IsDir }} -->
<!--     <ul> -->
<!--         <li class="collapse"> -->
<!--             <span>{{ .Name | title }}</span> -->
<!--             <ul> -->
<!--                 {{ $path := printf "%s/" .Name }} -->
<!--                 {{ range where (where $.Site.RegularPages "Type" "notebooks") "File.Dir" $path }} -->
<!---->
<!--                 <li> -->
<!--                     <span><a href="{{ .RelPermalink }}">{{ .Title }}</a></span> -->
<!--                 </li> -->
<!--                 {{ end }} -->
<!--             </ul> -->
<!--         </li> -->
<!--     </ul> -->
<!--     {{ end }} -->
<!--     {{ end }} -->
<!-- </div> -->

<div class="sidebar">
    <ul>
        {{ template "section-tree-nav" . }}
    </ul>
</div>

{{ define "section-tree-nav" }}
{{ range .Sections }}
<li class="collapse">
    <span>{{ .Section | title }}</span>
    {{ template "current-section_pages" . }}
</li>
{{ end }}
{{ end }}


{{ define "current-section_pages" }}
<ul>
    {{ range .Pages }}

    {{ if .IsSection }}
    <li class="collapse">
        <span>{{ .Title }}</span>
        {{ template "current-section_pages" . }}
    </li>

    {{ else }}

    <li><a href="{{ .Permalink}}"> {{ .Title }} </a></li>

    {{ end }}
    {{ end }}
</ul>
{{ end }}
